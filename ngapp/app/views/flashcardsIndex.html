<div class="deleted-today-oneline" ng-if="flashcardsIndex.deletedFlashcards">
  <a href ng-click="flashcardsIndex.showDeletedFlashcards()" ng-if="!flashcardsIndex.deletedFlashcardsShown">
    {{ 'flashcards.index.showDeleted' | translate:{count: flashcardsIndex.deletedFlashcards.length} }}
  </a>
  <div ng-if="flashcardsIndex.deletedFlashcardsShown">
    <p>{{ 'flashcards.index.justDeleted' | translate }}</p>
    <form ng-submit="flashcardsIndex.undelete()">
      <div ng-repeat="flashcard in flashcardsIndex.deletedFlashcards">
        <label class="checkbox">
          <input type="checkbox"
                 value="{{flashcard.id}}"
                 ng-model="flashcard.selected">
          {{ flashcard.frontText }}
        </label>
      </div>
      <input type="submit" class="btn-undelete" value="{{ 'flashcards.index.undelete' | translate }}">
    </form>
  </div>
</div>

<form name="flashcardsIndex.searchForm" class="flashcard-search-form" ng-submit="flashcardsIndex.search()">
  <div class="input-group">
    <input type="search" name="search" class="form-control" ng-model="flashcardsIndex.searchString">
    <span class="input-group-btn">
      <button class="btn btn-primary">
        {{ 'flashcards.index.search' | translate }}
      </button>
    </span>
  </div>
  <span class="help-block" ng-if="flashcardsIndex.submittedSearchString">
    {{ 'flashcards.index.filtered' | translate }}
    «{{ flashcardsIndex.submittedSearchString }}»
    (<a href ng-click="flashcardsIndex.clearSearch()">{{ 'flashcards.index.showAll' | translate }}</a>)
  </span>
</form>

<div ng-repeat="batch in flashcardsIndex.batches track by $index" wh-scroll-to-bottom="flashcardsIndex.queryNextBatch()">
  <div ng-repeat="flashcard in batch">
    <a id="{{flashcard.id}}"></a>
    <a class="flashcard" ng-class="{learned: flashcard.isLearned}" ng-href="{{linkRoot + flashcardsIndex.routes.editFlashcardPath(flashcard.id)}}"><span>{{flashcard.frontText}}</span><hr/><span>{{flashcard.backText}}</span></a>
  </div>
</div>
